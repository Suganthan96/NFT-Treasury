<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFT Treasury Project Flowchart</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        h1 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 30px;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        h2 {
            color: #FFD700;
            border-bottom: 2px solid #FFD700;
            padding-bottom: 10px;
            margin-top: 40px;
        }
        .mermaid {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }
        .description {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #FFD700;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ NFT Treasury Project Architecture</h1>
        
        <div class="description">
            <strong>ğŸ¯ Problem:</strong> Traditional platforms lack secure, decentralized membership systems that can be easily bypassed or hacked.
            <br><strong>ğŸ’¡ Solution:</strong> Blockchain-verified NFT ownership for unhackable, tiered access control.
        </div>

        <h2>ğŸ”„ Main Application Flow</h2>
        <div class="mermaid">
            flowchart TD
                A[ğŸ‘¤ User Visits Website] --> B[ğŸ”— Connect Wallet]
                B --> C{Wallet Connected?}
                C -->|âŒ No| D[ğŸ”Œ Show Connect Button]
                C -->|âœ… Yes| E[ğŸ’° Get User Address & Balance]
                
                E --> F[ğŸ” Check NFT Count via Alchemy]
                F --> G[ğŸ† Determine Membership Tier]
                G --> H{NFT Count?}
                
                H -->|0 NFTs| I[ğŸ¥‰ No Membership]
                H -->|1-2 NFTs| J[ğŸ¥‰ Bronze Tier]
                H -->|3-4 NFTs| K[ğŸ¥ˆ Silver Tier]
                H -->|5+ NFTs| L[ğŸ¥‡ Gold Tier]
                
                I --> M[ğŸ“¦ Show Bronze NFTs Only]
                J --> M
                K --> N[ğŸ“¦ Show Bronze + Silver NFTs]
                L --> O[ğŸ Show All Tiers + Gold Exclusive]
                
                M --> P[ğŸ›’ User Selects NFT]
                N --> P
                O --> P
                
                P --> Q[ğŸ’µ Calculate Price with Discounts]
                Q --> R{Gold Member?}
                R -->|Yes| S[ğŸ’¸ Apply 30% Discount]
                R -->|No| T[ğŸ’° Regular Price]
                
                S --> U[âš¡ Process NFT Purchase]
                T --> U
                
                style A fill:#e1f5fe
                style L fill:#fff3e0
                style S fill:#e8f5e8
                style U fill:#fce4ec
        </div>

        <h2>ğŸ” Membership Verification System</h2>
        <div class="mermaid">
            flowchart TD
                A[ğŸ‘¤ User Wallet Connected] --> B[ğŸ“Š Get NFT Count via Alchemy]
                B --> C[ğŸ… Query BitBadges for Existing Badges]
                C --> D[ğŸŒ Check Webhook Benefits]
                
                D --> E{Has BitBadges?}
                E -->|âœ… Yes| F[ğŸ¯ Grant Tier Access]
                E -->|âŒ No| G{Has Webhook Benefits?}
                
                G -->|âœ… Yes| F
                G -->|âŒ No| H[ğŸ“ˆ Check NFT Count for Eligibility]
                
                H --> I{NFT Count >= Tier?}
                I -->|âœ… Yes| J[ğŸŸï¸ Show Claim Badge Option]
                I -->|âŒ No| K[ğŸ“‹ Show Requirements]
                
                J --> L[ğŸ‘† User Claims Badge]
                L --> M[ğŸ’¾ Store Badge in BitBadges]
                M --> N[âš¡ Activate Webhook Benefits]
                N --> F
                
                F --> O[ğŸ”„ Update UI with Tier Benefits]
                O --> P[ğŸ Show Exclusive Content]
                
                style F fill:#e8f5e8
                style P fill:#fff3e0
        </div>

        <h2>ğŸ›’ NFT Purchase & Minting Flow</h2>
        <div class="mermaid">
            flowchart TD
                A[ğŸ›’ User Clicks Buy NFT] --> B{Wallet Connected?}
                B -->|âŒ No| C[âš ï¸ Show Connect Wallet Alert]
                B -->|âœ… Yes| D[ğŸ† Check Membership Status]
                
                D --> E{Gold Member?}
                E -->|âœ… Yes| F[ğŸ’¸ Calculate 30% Discount]
                E -->|âŒ No| G[ğŸ’° Use Regular Price]
                
                F --> H[â³ Set Loading State]
                G --> H
                
                H --> I[ğŸ–¼ï¸ Fetch Image from Public Folder]
                I --> J[ğŸ“„ Convert to Blob]
                J --> K[â˜ï¸ Upload to Pinata IPFS]
                
                K --> L[ğŸ“ Create NFT Metadata]
                L --> M[ğŸ·ï¸ Add Tier-Specific Attributes]
                M --> N[â˜ï¸ Upload Metadata to IPFS]
                
                N --> O[â›“ï¸ Call Smart Contract Mint]
                O --> P[â±ï¸ Wait for Transaction]
                
                P --> Q{Transaction Success?}
                Q -->|âœ… Yes| R[ğŸ‰ Show Success Message]
                Q -->|âŒ No| S[âŒ Show Error Message]
                
                R --> T[ğŸ“ Add to Purchased NFTs]
                T --> U[ğŸ”„ Update NFT Count]
                S --> V[ğŸ”„ Reset Loading State]
                U --> V
                
                style K fill:#e3f2fd
                style R fill:#e8f5e8
                style S fill:#ffebee
        </div>

        <h2>ğŸ¯ Tier System & Benefits</h2>
        <div class="mermaid">
            flowchart LR
                A[ğŸ¥‰ Bronze Tier<br/>1+ NFTs] --> B[ğŸ“¦ Basic Access<br/>12 Standard NFTs<br/>Website Access]
                
                C[ğŸ¥ˆ Silver Tier<br/>3+ NFTs] --> D[â­ Premium Access<br/>Bronze + 6 Premium NFTs<br/>Discord Access<br/>Priority Minting]
                
                E[ğŸ¥‡ Gold Tier<br/>5+ NFTs] --> F[ğŸ‘‘ VIP Access<br/>All Previous + 4 Exclusive Apes<br/>30% Discount<br/>Analytics Dashboard<br/>VIP Events]
                
                B --> G[ğŸ’° Regular Pricing]
                D --> G
                F --> H[ğŸ’¸ Discounted Pricing]
                
                G --> I[ğŸ”’ Standard Features]
                H --> J[ğŸ Premium Features<br/>+ Exclusive Content]
                
                style A fill:#cd7f32
                style C fill:#c0c0c0
                style E fill:#ffd700
                style F fill:#fff3e0
        </div>

        <h2>ğŸ”’ Security & Access Control</h2>
        <div class="mermaid">
            flowchart TD
                A[ğŸ‘¤ User Request] --> B[ğŸ” Verify Wallet Connection]
                B --> C[â›“ï¸ Check NFT Ownership on Blockchain]
                C --> D[ğŸ” Validate with Alchemy SDK]
                D --> E[ğŸ… Cross-reference BitBadges]
                E --> F[ğŸŒ Check Webhook Benefits]
                
                F --> G{Multiple Verification<br/>Layers Pass?}
                G -->|âŒ No| H[ğŸš« Deny Access]
                G -->|âœ… Yes| I[ğŸ¯ Grant Tier-Appropriate Access]
                
                H --> J[âš ï¸ Show Access Denied]
                I --> K[ğŸ Show Exclusive Content]
                
                K --> L[ğŸ’ Apply Tier Benefits<br/>â€¢ Pricing Discounts<br/>â€¢ Exclusive Collections<br/>â€¢ Special Features]
                
                style G fill:#fff3e0
                style I fill:#e8f5e8
                style L fill:#e1f5fe
        </div>

        <h2>ğŸš€ Technology Stack</h2>
        <div class="mermaid">
            flowchart TD
                A[âš›ï¸ Frontend<br/>React + TypeScript] --> B[ğŸ”— Wallet Integration<br/>Rainbow Kit + Wagmi]
                B --> C[ğŸ” NFT Verification<br/>Alchemy SDK]
                C --> D[ğŸ… Membership System<br/>BitBadges API]
                
                D --> E[ğŸ–¥ï¸ Backend<br/>Node.js + Express]
                E --> F[â˜ï¸ IPFS Storage<br/>Pinata]
                F --> G[â›“ï¸ Smart Contracts<br/>Ethereum/Sepolia]
                
                G --> H[ğŸ“§ Email System<br/>Nodemailer]
                H --> I[ğŸŒ Webhook System<br/>Real-time Benefits]
                I --> J[ğŸ’¾ Database<br/>In-Memory Storage]
                
                style A fill:#61dafb
                style E fill:#68a063
                style F fill:#ff6b6b
                style G fill:#627eea
        </div>

        <div class="description" style="margin-top: 30px; background: linear-gradient(135deg, rgba(255,215,0,0.2), rgba(255,165,0,0.2)); border-color: #FFD700;">
            <h3>ğŸ¯ Key Achievements:</h3>
            <ul>
                <li>âœ… <strong>Unhackable Verification:</strong> Multi-layer blockchain validation</li>
                <li>âœ… <strong>Decentralized Access:</strong> No central authority can revoke legitimate access</li>
                <li>âœ… <strong>Tiered Benefits:</strong> Progressive rewards based on NFT ownership</li>
                <li>âœ… <strong>Real-time Updates:</strong> Instant membership tier changes</li>
                <li>âœ… <strong>Smart Contract Integration:</strong> Automated minting and verification</li>
            </ul>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#667eea',
                primaryTextColor: '#333',
                primaryBorderColor: '#764ba2',
                lineColor: '#666',
                secondaryColor: '#FFD700',
                tertiaryColor: '#FFA500'
            },
            flowchart: {
                nodeSpacing: 50,
                rankSpacing: 60,
                curve: 'basis'
            }
        });
    </script>
</body>
</html>
