<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFT Treasury Project Flowchart</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        h1 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 30px;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        h2 {
            color: #FFD700;
            border-bottom: 2px solid #FFD700;
            padding-bottom: 10px;
            margin-top: 40px;
        }
        .mermaid {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }
        .description {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #FFD700;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎨 NFT Treasury Project Architecture</h1>
        
        <div class="description">
            <strong>🎯 Problem:</strong> Traditional platforms lack secure, decentralized membership systems that can be easily bypassed or hacked.
            <br><strong>💡 Solution:</strong> Blockchain-verified NFT ownership for unhackable, tiered access control.
        </div>

        <h2>🔄 Main Application Flow</h2>
        <div class="mermaid">
            flowchart TD
                A[👤 User Visits Website] --> B[🔗 Connect Wallet]
                B --> C{Wallet Connected?}
                C -->|❌ No| D[🔌 Show Connect Button]
                C -->|✅ Yes| E[💰 Get User Address & Balance]
                
                E --> F[🔍 Check NFT Count via Alchemy]
                F --> G[🏆 Determine Membership Tier]
                G --> H{NFT Count?}
                
                H -->|0 NFTs| I[🥉 No Membership]
                H -->|1-2 NFTs| J[🥉 Bronze Tier]
                H -->|3-4 NFTs| K[🥈 Silver Tier]
                H -->|5+ NFTs| L[🥇 Gold Tier]
                
                I --> M[📦 Show Bronze NFTs Only]
                J --> M
                K --> N[📦 Show Bronze + Silver NFTs]
                L --> O[🎁 Show All Tiers + Gold Exclusive]
                
                M --> P[🛒 User Selects NFT]
                N --> P
                O --> P
                
                P --> Q[💵 Calculate Price with Discounts]
                Q --> R{Gold Member?}
                R -->|Yes| S[💸 Apply 30% Discount]
                R -->|No| T[💰 Regular Price]
                
                S --> U[⚡ Process NFT Purchase]
                T --> U
                
                style A fill:#e1f5fe
                style L fill:#fff3e0
                style S fill:#e8f5e8
                style U fill:#fce4ec
        </div>

        <h2>🔐 Membership Verification System</h2>
        <div class="mermaid">
            flowchart TD
                A[👤 User Wallet Connected] --> B[📊 Get NFT Count via Alchemy]
                B --> C[🏅 Query BitBadges for Existing Badges]
                C --> D[🌐 Check Webhook Benefits]
                
                D --> E{Has BitBadges?}
                E -->|✅ Yes| F[🎯 Grant Tier Access]
                E -->|❌ No| G{Has Webhook Benefits?}
                
                G -->|✅ Yes| F
                G -->|❌ No| H[📈 Check NFT Count for Eligibility]
                
                H --> I{NFT Count >= Tier?}
                I -->|✅ Yes| J[🎟️ Show Claim Badge Option]
                I -->|❌ No| K[📋 Show Requirements]
                
                J --> L[👆 User Claims Badge]
                L --> M[💾 Store Badge in BitBadges]
                M --> N[⚡ Activate Webhook Benefits]
                N --> F
                
                F --> O[🔄 Update UI with Tier Benefits]
                O --> P[🎁 Show Exclusive Content]
                
                style F fill:#e8f5e8
                style P fill:#fff3e0
        </div>

        <h2>🛒 NFT Purchase & Minting Flow</h2>
        <div class="mermaid">
            flowchart TD
                A[🛒 User Clicks Buy NFT] --> B{Wallet Connected?}
                B -->|❌ No| C[⚠️ Show Connect Wallet Alert]
                B -->|✅ Yes| D[🏆 Check Membership Status]
                
                D --> E{Gold Member?}
                E -->|✅ Yes| F[💸 Calculate 30% Discount]
                E -->|❌ No| G[💰 Use Regular Price]
                
                F --> H[⏳ Set Loading State]
                G --> H
                
                H --> I[🖼️ Fetch Image from Public Folder]
                I --> J[📄 Convert to Blob]
                J --> K[☁️ Upload to Pinata IPFS]
                
                K --> L[📝 Create NFT Metadata]
                L --> M[🏷️ Add Tier-Specific Attributes]
                M --> N[☁️ Upload Metadata to IPFS]
                
                N --> O[⛓️ Call Smart Contract Mint]
                O --> P[⏱️ Wait for Transaction]
                
                P --> Q{Transaction Success?}
                Q -->|✅ Yes| R[🎉 Show Success Message]
                Q -->|❌ No| S[❌ Show Error Message]
                
                R --> T[📝 Add to Purchased NFTs]
                T --> U[🔄 Update NFT Count]
                S --> V[🔄 Reset Loading State]
                U --> V
                
                style K fill:#e3f2fd
                style R fill:#e8f5e8
                style S fill:#ffebee
        </div>

        <h2>🎯 Tier System & Benefits</h2>
        <div class="mermaid">
            flowchart LR
                A[🥉 Bronze Tier<br/>1+ NFTs] --> B[📦 Basic Access<br/>12 Standard NFTs<br/>Website Access]
                
                C[🥈 Silver Tier<br/>3+ NFTs] --> D[⭐ Premium Access<br/>Bronze + 6 Premium NFTs<br/>Discord Access<br/>Priority Minting]
                
                E[🥇 Gold Tier<br/>5+ NFTs] --> F[👑 VIP Access<br/>All Previous + 4 Exclusive Apes<br/>30% Discount<br/>Analytics Dashboard<br/>VIP Events]
                
                B --> G[💰 Regular Pricing]
                D --> G
                F --> H[💸 Discounted Pricing]
                
                G --> I[🔒 Standard Features]
                H --> J[🎁 Premium Features<br/>+ Exclusive Content]
                
                style A fill:#cd7f32
                style C fill:#c0c0c0
                style E fill:#ffd700
                style F fill:#fff3e0
        </div>

        <h2>🔒 Security & Access Control</h2>
        <div class="mermaid">
            flowchart TD
                A[👤 User Request] --> B[🔐 Verify Wallet Connection]
                B --> C[⛓️ Check NFT Ownership on Blockchain]
                C --> D[🔍 Validate with Alchemy SDK]
                D --> E[🏅 Cross-reference BitBadges]
                E --> F[🌐 Check Webhook Benefits]
                
                F --> G{Multiple Verification<br/>Layers Pass?}
                G -->|❌ No| H[🚫 Deny Access]
                G -->|✅ Yes| I[🎯 Grant Tier-Appropriate Access]
                
                H --> J[⚠️ Show Access Denied]
                I --> K[🎁 Show Exclusive Content]
                
                K --> L[💎 Apply Tier Benefits<br/>• Pricing Discounts<br/>• Exclusive Collections<br/>• Special Features]
                
                style G fill:#fff3e0
                style I fill:#e8f5e8
                style L fill:#e1f5fe
        </div>

        <h2>🚀 Technology Stack</h2>
        <div class="mermaid">
            flowchart TD
                A[⚛️ Frontend<br/>React + TypeScript] --> B[🔗 Wallet Integration<br/>Rainbow Kit + Wagmi]
                B --> C[🔍 NFT Verification<br/>Alchemy SDK]
                C --> D[🏅 Membership System<br/>BitBadges API]
                
                D --> E[🖥️ Backend<br/>Node.js + Express]
                E --> F[☁️ IPFS Storage<br/>Pinata]
                F --> G[⛓️ Smart Contracts<br/>Ethereum/Sepolia]
                
                G --> H[📧 Email System<br/>Nodemailer]
                H --> I[🌐 Webhook System<br/>Real-time Benefits]
                I --> J[💾 Database<br/>In-Memory Storage]
                
                style A fill:#61dafb
                style E fill:#68a063
                style F fill:#ff6b6b
                style G fill:#627eea
        </div>

        <div class="description" style="margin-top: 30px; background: linear-gradient(135deg, rgba(255,215,0,0.2), rgba(255,165,0,0.2)); border-color: #FFD700;">
            <h3>🎯 Key Achievements:</h3>
            <ul>
                <li>✅ <strong>Unhackable Verification:</strong> Multi-layer blockchain validation</li>
                <li>✅ <strong>Decentralized Access:</strong> No central authority can revoke legitimate access</li>
                <li>✅ <strong>Tiered Benefits:</strong> Progressive rewards based on NFT ownership</li>
                <li>✅ <strong>Real-time Updates:</strong> Instant membership tier changes</li>
                <li>✅ <strong>Smart Contract Integration:</strong> Automated minting and verification</li>
            </ul>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#667eea',
                primaryTextColor: '#333',
                primaryBorderColor: '#764ba2',
                lineColor: '#666',
                secondaryColor: '#FFD700',
                tertiaryColor: '#FFA500'
            },
            flowchart: {
                nodeSpacing: 50,
                rankSpacing: 60,
                curve: 'basis'
            }
        });
    </script>
</body>
</html>
